Add-Type -Path 'C:\Program Files (x86)\AWS SDK for .NET\bin\Net45\AWSSDK.dll'$EC2MetaData = [Amazon.EC2.Util.EC2Metadata]$EC2InstancIdDocument = (curl http://169.254.169.254/latest/dynamic/instance-identity/document/).content | ConvertFrom-Json$EC2InstanceId = $EC2InstancIdDocument.instanceId$EC2InstanceRegion = $EC2InstancIdDocument.regionGet-EC2Tag -Region $EC2InstanceRegion -Filter @(    @{name="resource-id";value=$EC2InstanceId},    @{name="key";value="Name"})if($EC2MetaData::AvailabilityZone -like "us-east-1*"){    $rdsendpoint = "jal-webapp-mysql.c48rqdxv8f9j.us-east-1.rds.amazonaws.com"}if($EC2MetaData::AvailabilityZone -like "us-west-2*"){    $rdsendpoint = "jal-webapp-mysql.c2d1kjikplih.us-west-2.rds.amazonaws.com"}$PathToFile = "C:\ImageGallery\Default.aspx.cs"$SearchFor = "private string dbinstance.+"$ReplaceWith = "private string dbinstance = `"" + $rdsendpoint + "`";"(get-content $PathtoFile) | % { $_ -replace $SearchFor, $ReplaceWith } | set-content $PathToFile